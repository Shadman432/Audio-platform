<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>My Streaming App</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #111;
      color: #fff;
      margin: 0;
      padding: 0;
    }
    h1, h2 {
      margin-left: 20px;
    }
    .slider, .content, .continue {
      display: flex;
      overflow-x: auto;
      gap: 15px;
      padding: 20px;
      scroll-behavior: smooth;
    }
    .slider::-webkit-scrollbar, .content::-webkit-scrollbar, .continue::-webkit-scrollbar {
      height: 8px;
    }
    .slider::-webkit-scrollbar-track, .content::-webkit-scrollbar-track, .continue::-webkit-scrollbar-track {
      background: #333;
    }
    .slider::-webkit-scrollbar-thumb, .content::-webkit-scrollbar-thumb, .continue::-webkit-scrollbar-thumb {
      background: #666;
      border-radius: 4px;
    }
    .card {
      background: #222;
      border-radius: 8px;
      padding: 15px;
      min-width: 200px;
      flex-shrink: 0;
      transition: transform 0.15s ease-out;
      cursor: pointer;
      will-change: transform;
    }
    .card:hover {
      transform: scale(1.02);
    }
    .card .img-wrapper {
      width: 100%;
      height: 120px;
      border-radius: 8px;
      background: #333;
      overflow: hidden;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    .card img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      opacity: 0;
      transition: opacity 0.5s ease;
    }
    .card img.loaded {
      opacity: 1;
    }
    .card h4 {
      margin: 10px 0 5px 0;
      font-size: 14px;
      color: #fff;
      overflow: hidden;
      text-overflow: ellipsis;
      white-space: nowrap;
    }
    .card p {
      margin: 5px 0;
      font-size: 12px;
      color: #aaa;
      overflow: hidden;
      text-overflow: ellipsis;
      white-space: nowrap;
    }
    .login-box {
      padding: 20px;
      background: #222;
      margin: 20px;
      border-radius: 8px;
    }
    .login-box input {
      width: 70%;
      padding: 8px;
      margin: 5px;
      background: #333;
      color: #fff;
      border: 1px solid #555;
      border-radius: 4px;
    }
    .login-box button {
      padding: 8px 15px;
      background: #4caf50;
      color: white;
      border: none;
      border-radius: 4px;
      cursor: pointer;
    }
    .login-box button:hover {
      background: #45a049;
    }
    .user-input {
      margin-top: 10px;
    }
    .progress-bar {
      width: 100%;
      background: #333;
      border-radius: 4px;
      overflow: hidden;
      height: 8px;
      margin-top: 5px;
    }
    .progress {
      height: 100%;
      background: linear-gradient(90deg, #4caf50, #8bc34a);
      width: 0%;
      transition: width 0.3s ease;
    }
    .rating {
      display: inline-block;
      background: #666;
      color: #fff;
      padding: 2px 6px;
      border-radius: 3px;
      font-size: 10px;
      margin-top: 5px;
    }
    .error-msg {
      color: #ff6b6b;
      padding: 20px;
      text-align: center;
      background: #2a1a1a;
      margin: 20px;
      border-radius: 8px;
      border-left: 4px solid #ff6b6b;
    }
    .loading {
      text-align: center;
      padding: 40px;
      color: #aaa;
    }


    /* Add these styles to the existing <style> section */

.story-testing {
  padding: 20px;
  background: #222;
  margin: 20px;
  border-radius: 8px;
}

.story-selector {
  margin-bottom: 20px;
}

.story-selector select {
  width: 300px;
  padding: 8px;
  margin: 5px;
  background: #333;
  color: #fff;
  border: 1px solid #555;
  border-radius: 4px;
}

.story-details {
  background: #2a2a2a;
  padding: 20px;
  border-radius: 8px;
  margin-top: 15px;
}

.story-info h3 {
  color: #fff;
  margin: 0 0 10px 0;
}

.story-info p {
  color: #ccc;
  margin: 0 0 15px 0;
}

.story-meta {
  margin-bottom: 20px;
}

.story-meta .genre {
  background: #4caf50;
  color: white;
  padding: 4px 8px;
  border-radius: 4px;
  font-size: 12px;
  margin-right: 10px;
}

.counters {
  display: flex;
  gap: 20px;
  margin: 20px 0;
  padding: 15px;
  background: #333;
  border-radius: 8px;
}

.counter {
  text-align: center;
  flex: 1;
}

.counter .count {
  display: block;
  font-size: 24px;
  font-weight: bold;
  color: #4caf50;
  margin-bottom: 5px;
}

.counter .label {
  font-size: 12px;
  color: #aaa;
  text-transform: uppercase;
}

.action-buttons {
  display: flex;
  gap: 10px;
  margin: 20px 0;
  flex-wrap: wrap;
}

.action-btn {
  padding: 10px 15px;
  background: #444;
  color: #fff;
  border: none;
  border-radius: 6px;
  cursor: pointer;
  transition: all 0.3s ease;
  font-size: 14px;
}

.action-btn:hover {
  background: #555;
  transform: translateY(-2px);
}

.action-btn.liked {
  background: #e91e63;
}

.action-btn.liked #likeIcon {
  color: #fff;
}

.comment-form {
  background: #333;
  padding: 15px;
  border-radius: 8px;
  margin: 15px 0;
}

.comment-form textarea {
  width: 100%;
  background: #444;
  color: #fff;
  border: 1px solid #555;
  border-radius: 4px;
  padding: 10px;
  resize: vertical;
  min-height: 60px;
}

.submit-btn, .cancel-btn {
  padding: 8px 15px;
  border: none;
  border-radius: 4px;
  cursor: pointer;
  margin: 10px 5px 0 0;
}

.submit-btn {
  background: #4caf50;
  color: white;
}

.cancel-btn {
  background: #666;
  color: white;
}

.comments-section {
  margin-top: 20px;
}

.comments-section h4 {
  color: #fff;
  margin-bottom: 15px;
}

.comments-list {
  max-height: 300px;
  overflow-y: auto;
}

.comment-item {
  background: #333;
  padding: 12px;
  border-radius: 6px;
  margin-bottom: 10px;
  border-left: 3px solid #4caf50;
}

.comment-text {
  color: #fff;
  margin-bottom: 8px;
}

.comment-meta {
  font-size: 11px;
  color: #aaa;
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.comment-like-btn {
  background: none;
  border: none;
  color: #aaa;
  cursor: pointer;
  font-size: 12px;
  padding: 2px 6px;
  border-radius: 3px;
  transition: all 0.2s ease;
}

.comment-like-btn:hover {
  background: #444;
  color: #fff;
}

.comment-like-btn.liked {
  color: #e91e63;
}

.counter.animate {
  animation: pulse 0.3s ease;
}

@keyframes pulse {
  0% { transform: scale(1); }
  50% { transform: scale(1.1); }
  100% { transform: scale(1); }
}
  </style>
</head>
<body>
  <h1 style="text-align:center;">üé¨ My Streaming Home</h1>
  
  <!-- Bearer Token Input -->
  <div class="login-box">
    <label>Bearer Token: 
      <input type="text" id="tokenInput" placeholder="Paste your JWT token here" />
    </label>
    <button onclick="setToken()">Set Token</button>
    <p id="login-status"></p>
  </div>

  <!-- Slideshow Section -->
  <h2>Featured</h2>
  <div id="slideshow" class="slider">
    <div class="loading">Loading slideshow...</div>
  </div>

  <!-- Content Categories Section -->
  <h2>Categories</h2>
  <div id="content" class="content">
    <div class="loading">Loading content...</div>
  </div>

  <!-- Continue Watching Section -->
  <h2>Continue Watching</h2>
  <div id="continue" class="continue">
    <div class="loading">Please set your token first</div>
  </div>

  <!-- Story Interaction Section -->
<h2>Story Interaction Testing</h2>
<div class="story-testing">
  <div class="story-selector">
    <label>Select Story: 
      <select id="storySelect">
        <option value="">Loading stories...</option>
      </select>
    </label>
    <button onclick="loadStoryDetails()">Load Story</button>
  </div>
  
  <div id="storyDetails" class="story-details" style="display: none;">
    <div class="story-info">
      <h3 id="storyTitle">Story Title</h3>
      <p id="storyDescription">Story Description</p>
      <div class="story-meta">
        <span class="genre" id="storyGenre">Genre</span>
        <span class="rating" id="storyRating">Rating</span>
      </div>
    </div>
    
    <!-- Real-time Counters -->
    <div class="counters">
      <div class="counter">
        <span class="count" id="likesCount">0</span>
        <span class="label">Likes</span>
      </div>
      <div class="counter">
        <span class="count" id="viewsCount">0</span>
        <span class="label">Views</span>
      </div>
      <div class="counter">
        <span class="count" id="sharesCount">0</span>
        <span class="label">Shares</span>
      </div>
      <div class="counter">
        <span class="count" id="commentsCount">0</span>
        <span class="label">Comments</span>
      </div>
    </div>
    
    <!-- Action Buttons -->
    <div class="action-buttons">
      <button id="likeBtn" onclick="toggleLike()" class="action-btn">
        <span id="likeIcon">‚ô°</span> Like
      </button>
      <button onclick="addView()" class="action-btn">
        üëÅÔ∏è View
      </button>
      <button onclick="addShare()" class="action-btn">
        üì§ Share
      </button>
      <button onclick="toggleCommentForm()" class="action-btn">
        üí¨ Comment
      </button>
    </div>
    
    <!-- Comment Form -->
    <div id="commentForm" class="comment-form" style="display: none;">
      <textarea id="commentText" placeholder="Write your comment..." rows="3"></textarea>
      <button onclick="addComment()" class="submit-btn">Post Comment</button>
      <button onclick="toggleCommentForm()" class="cancel-btn">Cancel</button>
    </div>
    
    <!-- Comments List -->
    <div class="comments-section">
      <h4>Comments</h4>
      <div id="commentsList" class="comments-list">
        <div class="loading">No comments yet</div>
      </div>
    </div>
  </div>
</div>


  <script>
    const API_BASE = "http://localhost:8000/api/v1";
    let token = null;
    let currentUserId = null;

    // Utility: Load image with fade-in
    function loadImage(img) {
      img.onload = () => img.classList.add("loaded");
      img.onerror = () => {
        img.src = "https://via.placeholder.com/200x120/333/fff?text=Error";
        img.classList.add("loaded");
      };
    }

    // Parse JWT
    function parseJWT(token) {
      try {
        const base64Url = token.split('.')[1];
        const base64 = base64Url.replace(/-/g, '+').replace(/_/g, '/');
        const jsonPayload = decodeURIComponent(atob(base64).split('').map(function(c) {
          return '%' + ('00' + c.charCodeAt(0).toString(16)).slice(-2);
        }).join(''));
        return JSON.parse(jsonPayload);
      } catch {
        return null;
      }
    }

    // Set token
    function setToken() {
      const inputToken = document.getElementById("tokenInput").value.trim();
      const statusEl = document.getElementById("login-status");
      if (!inputToken) {
        statusEl.innerHTML = "‚ùå Please provide a valid token";
        statusEl.style.color = "#ff6b6b";
        return;
      }
      const payload = parseJWT(inputToken);
      if (!payload) {
        statusEl.innerHTML = "‚ùå Invalid JWT token format";
        statusEl.style.color = "#ff6b6b";
        return;
      }
      const userId = payload.user_id || payload.sub || payload.id;
      if (!userId) {
        statusEl.innerHTML = "‚ùå No user ID found in token";
        statusEl.style.color = "#ff6b6b";
        return;
      }
      token = inputToken;
      currentUserId = userId;
      statusEl.innerHTML = `‚úÖ Token set! User: ${userId.toString().substring(0, 8)}...`;
      statusEl.style.color = "#4caf50";
      loadContinue();
    }

    // Load Continue Watching
    async function loadContinue() {
      const container = document.getElementById("continue");
      if (!token || !currentUserId) {
        container.innerHTML = '<div class="error-msg">üîí Please set your Bearer token first</div>';
        return;
      }
      container.innerHTML = `<div class="loading">Loading your progress...</div>`;
      try {
        const res = await fetch(`${API_BASE}/continue/?user=${currentUserId}`, {
          headers: { "Authorization": `Bearer ${token}` }
        });
        if (!res.ok) throw new Error("Failed to fetch");
        const data = await res.json();
        container.innerHTML = "";
        if (!Array.isArray(data) || !data.length) {
          container.innerHTML = '<div class="error-msg">No continue watching items</div>';
          return;
        }
        data.forEach((item, index) => {
          const progress = item.total_duration > 0 
            ? Math.round((item.progress_seconds / item.total_duration) * 100) 
            : 0;
          const card = document.createElement("div");
          card.className = "card";
          card.innerHTML = `
            <div class="img-wrapper" style="background:hsl(${(index*40)%360},50%,40%)">
              <span>EP ${index+1}</span>
            </div>
            <h4>Story: ${item.story_id?.substring(0,8) || 'Unknown'}</h4>
            <p>Episode: ${item.episode_id?.substring(0,8) || 'Unknown'}</p>
            <div class="progress-bar"><div class="progress" style="width:${progress}%"></div></div>
            <p style="color:#4caf50;font-weight:bold">${progress}% completed</p>
          `;
          container.appendChild(card);
        });
      } catch (err) {
        container.innerHTML = `<div class="error-msg">‚ö†Ô∏è ${err.message}</div>`;
      }
    }

    // Load Slideshow
    async function loadSlideshow() {
      const container = document.getElementById("slideshow");
      try {
        const res = await fetch(`${API_BASE}/slideshow/active`);
        const data = await res.json();
        container.innerHTML = "";
        if (!data.length) {
          container.innerHTML = '<div class="error-msg">No slideshow content</div>';
          return;
        }
        data.sort((a,b) => (a.display_order||0)-(b.display_order||0))
          .forEach((item, index) => {
            const story = item.story || item;
            const card = document.createElement("div");
            card.className = "card";
            card.innerHTML = `
              <div class="img-wrapper">
                <img src="${story.thumbnail_rect || story.thumbnail_responsive || ''}" 
                     alt="${story.title||'Slideshow'}" loading="lazy">
              </div>
              <h4>${story.title || `Slideshow ${index+1}`}</h4>
              <p>${story.description || story.genre || 'No description'}</p>
            `;
            container.appendChild(card);
            const img = card.querySelector("img");
            if (img) loadImage(img);
          });
      } catch (err) {
        container.innerHTML = `<div class="error-msg">‚ö†Ô∏è ${err.message}</div>`;
      }
    }

    // Load Content
    async function loadContent() {
      const container = document.getElementById("content");
      try {
        const res = await fetch(`${API_BASE}/content`);
        const data = await res.json();
        container.innerHTML = "";
        if (!data.length) {
          container.innerHTML = '<div class="error-msg">No content</div>';
          return;
        }
        data.forEach((item, index) => {
          const content = item.home_content_series || [item];
          content.forEach(story => {
            const card = document.createElement("div");
            card.className = "card";
            card.innerHTML = `
              <div class="img-wrapper">
                <img src="${story.thumbnail_square || story.thumbnail_rect || ''}" 
                     alt="${story.title||'Content'}" loading="lazy">
              </div>
              <h4>${story.title || `Story ${index+1}`}</h4>
              <p>${story.description || story.genre || item.category_name}</p>
            `;
            container.appendChild(card);
            const img = card.querySelector("img");
            if (img) loadImage(img);
          });
        });
      } catch (err) {
        container.innerHTML = `<div class="error-msg">‚ö†Ô∏è ${err.message}</div>`;
      }
    }

    // Init
    document.addEventListener("DOMContentLoaded", () => {
      loadSlideshow();
      loadContent();
    });

    // Add these functions to the existing <script> section

let currentStoryId = null;
let isLiked = false;

// Load stories into dropdown
async function loadStoriesDropdown() {
  try {
    const res = await fetch(`${API_BASE}/stories?limit=20`);
    const data = await res.json();
    const select = document.getElementById("storySelect");
    
    select.innerHTML = '<option value="">Select a story...</option>';
    
    if (data.success && data.stories && data.stories.length > 0) {
      data.stories.forEach(story => {
        const option = document.createElement("option");
        option.value = story.story_id;
        option.textContent = `${story.title} (${story.genre || 'Unknown'})`;
        select.appendChild(option);
      });
    }
  } catch (err) {
    console.error("Failed to load stories:", err);
    document.getElementById("storySelect").innerHTML = '<option value="">Error loading stories</option>';
  }
}

// Load story details and counters
async function loadStoryDetails() {
  const storyId = document.getElementById("storySelect").value;
  if (!storyId) {
    alert("Please select a story first");
    return;
  }
  
  currentStoryId = storyId;
  
  try {
    // Get story details
    const res = await fetch(`${API_BASE}/stories/${storyId}`);
    const data = await res.json();
    
    if (data.success && data.story) {
      const story = data.story;
      
      // Update UI
      document.getElementById("storyTitle").textContent = story.title || "Unknown Title";
      document.getElementById("storyDescription").textContent = story.description || "No description available";
      document.getElementById("storyGenre").textContent = story.genre || "Unknown";
      document.getElementById("storyRating").textContent = story.rating || "NR";
      
      // Update counters
      updateCounters(story);
      
      // Check if user liked this story
      await checkUserLike();
      
      // Load comments
      await loadComments();
      
      // Show story details
      document.getElementById("storyDetails").style.display = "block";
    }
  } catch (err) {
    console.error("Failed to load story:", err);
    alert("Failed to load story details");
  }
}

// Update counter display
function updateCounters(story) {
  document.getElementById("likesCount").textContent = story.likes_count || 0;
  document.getElementById("viewsCount").textContent = story.views_count || 0;
  document.getElementById("sharesCount").textContent = story.shares_count || 0;
  document.getElementById("commentsCount").textContent = story.comments_count || 0;
}

// Animate counter
function animateCounter(counterId) {
  const counter = document.querySelector(`#${counterId}`).closest('.counter');
  counter.classList.add('animate');
  setTimeout(() => counter.classList.remove('animate'), 300);
}

// Toggle like
async function toggleLike() {
  if (!token) {
    alert("Please set your Bearer token first");
    return;
  }
  
  if (!currentStoryId) return;
  
  try {
    const res = await fetch(`${API_BASE}/likes/story/${currentStoryId}/toggle`, {
      method: 'POST',
      headers: {
        "Authorization": `Bearer ${token}`,
        "Content-Type": "application/json"
      }
    });
    
    const data = await res.json();
    
    if (res.ok) {
      isLiked = data.liked;
      
      // Update button
      const btn = document.getElementById("likeBtn");
      const icon = document.getElementById("likeIcon");
      
      if (isLiked) {
        btn.classList.add("liked");
        icon.textContent = "‚ô•";
      } else {
        btn.classList.remove("liked");
        icon.textContent = "‚ô°";
      }
      
      // Update counter
      const currentCount = parseInt(document.getElementById("likesCount").textContent);
      const newCount = isLiked ? currentCount + 1 : currentCount - 1;
      document.getElementById("likesCount").textContent = Math.max(0, newCount);
      animateCounter('likesCount');
      
    } else {
      alert("Failed to toggle like: " + data.detail);
    }
  } catch (err) {
    console.error("Like error:", err);
    alert("Failed to toggle like");
  }
}

// Check if user liked this story
async function checkUserLike() {
  if (!token || !currentStoryId) return;
  
  try {
    const res = await fetch(`${API_BASE}/likes/story/${currentStoryId}/my-like`, {
      headers: { "Authorization": `Bearer ${token}` }
    });
    
    if (res.ok) {
      const like = await res.json();
      isLiked = !!like;
      
      const btn = document.getElementById("likeBtn");
      const icon = document.getElementById("likeIcon");
      
      if (isLiked) {
        btn.classList.add("liked");
        icon.textContent = "‚ô•";
      } else {
        btn.classList.remove("liked");
        icon.textContent = "‚ô°";
      }
    }
  } catch (err) {
    console.error("Failed to check like status:", err);
  }
}

// Add view
async function addView() {
  if (!currentStoryId) return;
  
  try {
    const res = await fetch(`${API_BASE}/views`, {
      method: 'POST',
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({
        story_id: currentStoryId,
        ip_address: "127.0.0.1"
      })
    });
    
    if (res.ok) {
      const currentCount = parseInt(document.getElementById("viewsCount").textContent);
      document.getElementById("viewsCount").textContent = currentCount + 1;
      animateCounter('viewsCount');
    }
  } catch (err) {
    console.error("View error:", err);
  }
}

// Add share
async function addShare() {
  if (!token) {
    alert("Please set your Bearer token first");
    return;
  }
  
  if (!currentStoryId) return;
  
  try {
    const res = await fetch(`${API_BASE}/shares`, {
      method: 'POST',
      headers: {
        "Authorization": `Bearer ${token}`,
        "Content-Type": "application/json"
      },
      body: JSON.stringify({
        story_id: currentStoryId,
        platform: "web"
      })
    });
    
    if (res.ok) {
      const currentCount = parseInt(document.getElementById("sharesCount").textContent);
      document.getElementById("sharesCount").textContent = currentCount + 1;
      animateCounter('sharesCount');
    }
  } catch (err) {
    console.error("Share error:", err);
  }
}

// Toggle comment form
function toggleCommentForm() {
  const form = document.getElementById("commentForm");
  const isVisible = form.style.display !== "none";
  form.style.display = isVisible ? "none" : "block";
  
  if (!isVisible) {
    document.getElementById("commentText").focus();
  }
}

// Add comment
async function addComment() {
  if (!token) {
    alert("Please set your Bearer token first");
    return;
  }
  
  const commentText = document.getElementById("commentText").value.trim();
  if (!commentText) {
    alert("Please enter a comment");
    return;
  }
  
  if (!currentStoryId) return;
  
  try {
    const res = await fetch(`${API_BASE}/comments`, {
      method: 'POST',
      headers: {
        "Authorization": `Bearer ${token}`,
        "Content-Type": "application/json"
      },
      body: JSON.stringify({
        story_id: currentStoryId,
        comment_text: commentText
      })
    });
    
    if (res.ok) {
      // Clear form
      document.getElementById("commentText").value = "";
      toggleCommentForm();
      
      // Update counter
      const currentCount = parseInt(document.getElementById("commentsCount").textContent);
      document.getElementById("commentsCount").textContent = currentCount + 1;
      animateCounter('commentsCount');
      
      // Reload comments
      await loadComments();
    } else {
      const data = await res.json();
      alert("Failed to add comment: " + data.detail);
    }
  } catch (err) {
    console.error("Comment error:", err);
    alert("Failed to add comment");
  }
}

// Load comments
async function loadComments() {
  if (!currentStoryId) return;
  
  try {
    const res = await fetch(`${API_BASE}/comments/story/${currentStoryId}/ranked?limit=5`);
    const comments = await res.json();
    
    const container = document.getElementById("commentsList");
    
    if (!Array.isArray(comments) || comments.length === 0) {
      container.innerHTML = '<div class="loading">No comments yet</div>';
      return;
    }
    
    container.innerHTML = "";
    
    comments.forEach(comment => {
      const commentEl = document.createElement("div");
      commentEl.className = "comment-item";
      commentEl.innerHTML = `
        <div class="comment-text">${comment.comment_text}</div>
        <div class="comment-meta">
          <span>User: ${comment.user_id.substring(0, 8)}...</span>
          <button class="comment-like-btn" onclick="likeComment('${comment.comment_id}', this)">
            ‚ô° ${comment.comment_like_count || 0}
          </button>
        </div>
      `;
      container.appendChild(commentEl);
    });
  } catch (err) {
    console.error("Failed to load comments:", err);
    document.getElementById("commentsList").innerHTML = '<div class="loading">Error loading comments</div>';
  }
}

// Like comment
async function likeComment(commentId, btnEl) {
  if (!token) {
    alert("Please set your Bearer token first");
    return;
  }
  
  try {
    const res = await fetch(`${API_API}/comments/${commentId}/like`, {
      method: 'POST',
      headers: { "Authorization": `Bearer ${token}` }
    });
    
    if (res.ok) {
      // Toggle button state (simple toggle for demo)
      if (btnEl.classList.contains('liked')) {
        btnEl.classList.remove('liked');
        const count = parseInt(btnEl.textContent.match(/\d+/)[0]);
        btnEl.innerHTML = `‚ô° ${Math.max(0, count - 1)}`;
      } else {
        btnEl.classList.add('liked');
        const count = parseInt(btnEl.textContent.match(/\d+/)[0]);
        btnEl.innerHTML = `‚ô• ${count + 1}`;
      }
    }
  } catch (err) {
    console.error("Comment like error:", err);
  }
}

// Initialize on page load
document.addEventListener("DOMContentLoaded", () => {
  loadSlideshow();
  loadContent();
  loadStoriesDropdown(); // Add this line
});

  </script>
</body>
</html>
